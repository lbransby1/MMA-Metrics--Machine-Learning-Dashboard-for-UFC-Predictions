name: Sync to Hugging Face Spaces

on:
  push:
    branches: [main]  # or your deployment branch

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repo
      uses: actions/checkout@v3

    - name: Set up Git
      run: |
        git config --global user.email "luke.bransby15@gmail.com"
        git config --global user.name "Luke Bransby"

    - name: Push to Hugging Face
      env:
        HF_TOKEN: ${{ secrets.HF_TOKEN }}
      run: |
        git remote add hf https://huggingface.co/spaces/lukebransby/MMAMetrics
        git fetch hf
        git pull hf main --rebase || true  # Avoid errors if empty
        git push https://lukebransby:$HF_TOKEN@huggingface.co/spaces/lukebransby/MMAMetrics main
